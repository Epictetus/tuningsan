#!/usr/bin/env ruby
$: << File.expand_path('../../lib', __FILE__)
require 'bundler/setup'
require 'autotuner/tuner'
require 'autotuner/plan'
require 'autotuner/tunee/command'
require 'autotuner/agent/agent_factory'

plan = Autotuner::Plan.load(File.expand_path('../../plans/test.yml', __FILE__))
agent = Autotuner::Agent::AgentFactory.new(plan).create_from_remote
tunee = Autotuner::Tunee::Command.new agent, plan
tuner = Autotuner::Tuner.new tunee, plan
tuner.tune(:worker_processes)

tuner.result.show
